### This file was generated by Nexus Schema
### Do not make changes to this file directly


type Alternative {
  id: ID!
  index: Int!
  text: String!
  votationId: String!
}

type AlternativeResult {
  id: ID!
  index: Int!
  isWinner: Boolean!
  text: String!
  votationId: String!
  votes: Int!
}

"""
connects alternative to its vote count for one round when computing stv result
"""
type AlternativeRoundVoteCount {
  alternative: Alternative!
  voteCount: Float!
}

type AlternativeWithWinner {
  id: ID!
  index: Int!
  isWinner: Boolean!
  text: String!
}

input CreateAlternativeInput {
  index: Int!
  text: String!
}

input CreateMeetingInput {
  allowSelfRegistration: Boolean!
  description: String
  organization: String!
  startTime: DateTime!
  title: String!
}

input CreateVotationInput {
  alternatives: [CreateAlternativeInput!]
  blankVotes: Boolean!
  description: String
  hiddenVotes: Boolean!
  index: Int!
  majorityThreshold: Int!
  numberOfWinners: Int!
  title: String!
  type: VotationType!
}

"""
A date-time string at UTC, such as 2007-12-03T10:15:30Z, compliant with the `date-time` format outlined in section 5.6 of the RFC 3339 profile of the ISO 8601 standard for representation of dates and times using the Gregorian calendar.
"""
scalar DateTime

union DeleteParticipantResult = OwnerCannotBeRemovedFromParticipantError | Participant

union GetUserResult = User | UserNotFoundError

type MaxOneOpenVotationError {
  message: String!
}

type Meeting {
  allowSelfRegistration: Boolean!
  description: String
  id: ID!
  organization: String!
  owner: User
  participants: [Participant]!
  startTime: DateTime!
  status: MeetingStatus!
  title: String!
  votations: [Votation]
}

enum MeetingStatus {
  ENDED
  ONGOING
  UPCOMING
}

type Mutation {
  """Creates invites and participants for the emails provided."""
  addParticipants(meetingId: String!, participants: [ParticipantInput!]!): Int

  """Returns the id of the votation"""
  castBlankVote(votationId: String!): String
  castStvVote(alternatives: [StvVoteAlternativeInput!]!, votationId: String!): String
  castVote(alternativeId: String!): Vote

  """"""
  createMeeting(meeting: CreateMeetingInput!): Meeting
  createVotations(meetingId: String!, votations: [CreateVotationInput!]!): [Votation]

  """"""
  deleteAlternatives(ids: [String!]!): [String]

  """Delete your own user."""
  deleteMe: String

  """"""
  deleteMeeting(id: String!): Meeting

  """"""
  deleteParticipants(emails: [String!]!, meetingId: String!): [String]

  """"""
  deleteVotation(votationId: String!): String

  """Register the logged in user as a participant."""
  registerAsParticipant(meetingId: String!): Participant

  """Approve or disapprove a votation result"""
  reviewVotation(approved: Boolean!, votationId: String!): String

  """Start the next votation in line for a meeting."""
  startNextVotation(meetingId: String!): OpenVotationResult

  """"""
  updateMeeting(meeting: UpdateMeetingInput!): Meeting

  """Update participants of a meeting."""
  updateParticipant(meetingId: String!, participant: ParticipantInput!): ParticipantOrInvite
  updateVotationIndexes(meetingId: String!, votations: [UpdateVotationIndexInput!]!): [Votation]

  """Update status of a votation, to anything other than OPEN."""
  updateVotationStatus(status: VotationStatus!, votationId: String!): Votation

  """Update votations belonging to a meeting."""
  updateVotations(meetingId: String!, votations: [UpdateVotationInput!]!): [Votation]
}

union MyReviewResult = NoReview | VotationReview

type NewVoteRegisteredResponse {
  votationId: String!
  voteCount: Int!
  votingEligibleCount: Int!
}

type NoReview {
  message: String!
}

type NoUpcomingVotations {
  message: String!
}

union OpenVotationResult = MaxOneOpenVotationError | NoUpcomingVotations | OpenedVotation | VotationHasNoAlternatives

type OpenedVotation {
  title: String!
  votationId: String!
}

type OwnerCannotBeRemovedFromParticipantError {
  message: String!
}

type Participant {
  isVotingEligible: Boolean!
  role: Role!
  user: User
}

input ParticipantInput {
  email: String!
  isVotingEligible: Boolean!
  role: Role!
}

type ParticipantOrInvite {
  email: String!
  isVotingEligible: Boolean!
  role: Role!
}

type ParticipantUpdatedResponse {
  isVotingEligible: Boolean!
  role: Role!
}

type Query {
  """"""
  getMyReview(votationId: String!): MyReviewResult

  """"""
  getOpenVotation(meetingId: String!): String

  """Return the number of approvals and disapprovals of a votation"""
  getReviews(votationId: String!): ReviewResult

  """Get results from an stv votation"""
  getStvResult(votationId: String!): StvResult

  """"""
  getVotationResults(votationId: String!): VotationResults
  getVoteCount(votationId: String!): VoteCountResult

  """"""
  getWinnerOfVotation(votationId: String!): [Alternative]

  """Find a meeting by id from meetings youre participating in"""
  meetingById(meetingId: String!): Meeting

  """Find meetings you are participating in"""
  meetings: [Meeting]!

  """Return participant belonging to the user for the meeting specified."""
  myParticipant(meetingId: String!): ParticipantOrInvite

  """Get number of upcoming votations for a meeting."""
  numberOfUpcomingVotations(meetingId: String!): Int

  """
  Return relevant information about invites and participants connected to meeting
  """
  participants(meetingId: String!): [ParticipantOrInvite]

  """Returns result of a votation"""
  result(votationId: String!): Result

  """
  Return the results of all the votations with votationStatus === "PUBLISHED_RESULT" of that meeting
  """
  resultsOfPublishedVotations(meetingId: String!): [VotationWithWinner]

  """Provides a ticket to change Auth0 password."""
  updateMyPassword: String
  user: GetUserResult
  votationById(votationId: String!): Votation
}

"""The result of a votation"""
type Result {
  alternatives: [AlternativeResult!]!
  blankVoteCount: Int
  quota: Float
  stvRoundResults: [StvRoundResult!]
  votationId: String!
  voteCount: Int!
  votingEligibleCount: Int!
}

type ReviewResult {
  approved: Int!
  disapproved: Int!
}

enum Role {
  ADMIN
  COUNTER
  PARTICIPANT
}

"""Results from a stv votation"""
type StvResult {
  alternatives: [AlternativeResult!]!
  quota: Int!
  stvRoundResults: [StvRoundResult!]!
  votationId: String!
  voteCount: Int!
  votingEligibleCount: Int!
}

"""Results from one round computing the result of an stv votation"""
type StvRoundResult {
  alternativesWithRoundVoteCount: [AlternativeRoundVoteCount!]!
  id: String!
  index: Int!
  losers: [Alternative!]!
  winners: [Alternative!]!
}

input StvVoteAlternativeInput {
  alternativeId: String!
  ranking: Int!
}

type Subscription {
  newVoteRegistered(votationId: String!): NewVoteRegisteredResponse
  participantUpdated(meetingId: String!, userId: String!): ParticipantUpdatedResponse
  reviewAdded(votationId: String!): ReviewResult
  votationDeleted(meetingId: String!): String
  votationOpenedForMeeting(meetingId: String!): String
  votationStatusUpdated(id: String!): VotationStatusUpdatedResponse

  """Returns the updated votations of a meeting."""
  votationsUpdated(meetingId: String!): [VotationWithAlternative]
}

input UpdateAlternativeInput {
  id: String!
  index: Int!
  text: String!
}

input UpdateMeetingInput {
  allowSelfRegistration: Boolean
  description: String
  id: String!
  organization: String
  startTime: DateTime
  status: MeetingStatus
  title: String
}

input UpdateParticipantInput {
  email: String!
  isVotingEligible: Boolean!
  role: Role!
  userExists: Boolean!
}

input UpdateVotationIndexInput {
  id: String!
  index: Int!
}

input UpdateVotationInput {
  alternatives: [UpdateAlternativeInput!]
  blankVotes: Boolean!
  description: String
  hiddenVotes: Boolean!
  id: String!
  index: Int!
  majorityThreshold: Int!
  numberOfWinners: Int!
  title: String!
  type: VotationType!
}

type User {
  email: String!
  emailVerified: Boolean!
  id: ID!
}

type UserNotFoundError {
  message: String!
}

type Votation {
  alternatives: [Alternative]
  blankVotes: Boolean!
  description: String
  hasVoted: [String]
  hiddenVotes: Boolean!
  id: ID!
  index: Int!
  majorityThreshold: Int!
  meetingId: String!
  numberOfWinners: Int!
  status: VotationStatus!
  title: String!
  type: VotationType!
}

type VotationHasNoAlternatives {
  message: String!
}

"""The results of a votation"""
type VotationResults {
  alternatives: [AlternativeResult!]!
  blankVoteCount: Int!
  blankVotes: Boolean!
  id: String!
  voteCount: Int!
  votingEligibleCount: Int!
}

type VotationReview {
  approved: Boolean!
}

enum VotationStatus {
  CHECKING_RESULT
  INVALID
  OPEN
  PUBLISHED_RESULT
  UPCOMING
}

type VotationStatusUpdatedResponse {
  reason: String
  votationId: String!
  votationStatus: VotationStatus!
}

enum VotationType {
  QUALIFIED
  SIMPLE
  STV
}

type VotationWithAlternative {
  alternatives: [Alternative]
  blankVotes: Boolean!
  description: String
  hiddenVotes: Boolean!
  id: ID!
  index: Int!
  majorityThreshold: Int!
  meetingId: String!
  numberOfWinners: Int!
  status: VotationStatus!
  title: String!
  type: VotationType!
}

type VotationWithWinner {
  alternatives: [AlternativeWithWinner]!
  id: ID!
}

type Vote {
  alternative: Alternative
  alternativeId: String!
  id: ID!
}

"""The result of getVoteCount"""
type VoteCountResult {
  voteCount: Int!
  votingEligibleCount: Int!
}
